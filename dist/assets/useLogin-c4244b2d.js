var h=Object.defineProperty;var F=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var p=(e,r,s)=>r in e?h(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s,v=(e,r)=>{for(var s in r||(r={}))O.call(r,s)&&p(e,s,r[s]);if(F)for(var s of F(r))b.call(r,s)&&p(e,s,r[s]);return e};var m=(e,r,s)=>new Promise((o,c)=>{var d=n=>{try{i(s.next(n))}catch(t){c(t)}},g=n=>{try{i(s.throw(n))}catch(t){c(t)}},i=n=>n.done?o(n.value):Promise.resolve(n.value).then(d,g);i((s=s.apply(e,r)).next())});import{b as I}from"./index.js";import{k as _,e as l,u as a}from"./vue-05cc5022.js";var G=(e=>(e[e.LOGIN=0]="LOGIN",e[e.REGISTER=1]="REGISTER",e[e.RESET_PASSWORD=2]="RESET_PASSWORD",e[e.MOBILE=3]="MOBILE",e[e.QR_CODE=4]="QR_CODE",e))(G||{});const y=_(0);function A(){function e(o){y.value=o}const r=l(()=>y.value);function s(){e(0)}return{setLoginState:e,getLoginState:r,handleBackLogin:s}}function B(e){const r=l(()=>{var c;const o=a(e);return(c=o==null?void 0:o.validate)!=null?c:d=>Promise.resolve()});function s(){return m(this,null,function*(){const o=a(e);return o?yield o.validate():void 0})}return{validate:r,validForm:s}}function C(e){const{t:r}=I(),s=l(()=>P(r("sys.login.accountPlaceholder"))),o=l(()=>P(r("sys.login.passwordPlaceholder"))),c=l(()=>P(r("sys.login.smsPlaceholder"))),d=l(()=>P(r("sys.login.mobilePlaceholder"))),g=(t,u)=>m(this,null,function*(){return u?Promise.resolve():Promise.reject(r("sys.login.policyPlaceholder"))}),i=t=>(u,R)=>m(this,null,function*(){return R?R!==t?Promise.reject(r("sys.login.diffPwd")):Promise.resolve():Promise.reject(r("sys.login.passwordPlaceholder"))});return{getFormRules:l(()=>{const t=a(s),u=a(o),R=a(c),w=a(d),f={sms:R,mobile:w};switch(a(y)){case 1:return v({account:t,password:u,confirmPassword:[{validator:i(e==null?void 0:e.password),trigger:"change"}],policy:[{validator:g,trigger:"change"}]},f);case 2:return v({account:t},f);case 3:return f;default:return{account:t,password:u}}})}}function P(e){return[{required:!0,message:e,trigger:"change"}]}export{G as L,C as a,B as b,A as u};

var Y=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var q=(n,e,o)=>e in n?Y(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,T=(n,e)=>{for(var o in e||(e={}))oe.call(e,o)&&q(n,o,e[o]);if(V)for(var o of V(e))ne.call(e,o)&&q(n,o,e[o]);return n},D=(n,e)=>ee(n,te(e));var j=(n,e,o)=>new Promise((s,m)=>{var k=i=>{try{g(o.next(i))}catch(C){m(C)}},b=i=>{try{g(o.throw(i))}catch(C){m(C)}},g=i=>i.done?s(i.value):Promise.resolve(i.value).then(k,b);g((o=o.apply(n,e)).next())});import{a as U,n as ae,_ as se,q as re,m as ie,v as ce,p as h,P as le,w as X}from"./index.js";import{d as Z,_ as E,$ as A,a0 as I,R as F,a2 as x,u as f,ag as J,k as S,w as O,q as z,G as ue,M as fe,ak as ge,p as de,e as v,a9 as K,af as pe,ab as he,aa as W,ad as me,ac as G,ae as He,ah as _e,F as ye,E as ve,a1 as Fe}from"./vue-05cc5022.js";import{u as be}from"./useContentViewHeight-c26bde0b.js";import{o as Ce}from"./onMountedOrActivated-7a6feff1.js";import{u as $e}from"./useWindowSizeFn-07d3d29d.js";import{K as L,aq as ke}from"./antd-5cc557c7.js";const Pe=Z({name:"PageFooter",inheritAttrs:!1,__name:"PageFooter",setup(n){const{prefixCls:e}=U("page-footer"),{getCalcContentWidth:o}=ae();return(s,m)=>(E(),A("div",{class:x(f(e)),style:J({width:f(o)})},[I("div",{class:x(`${f(e)}__left`)},[F(s.$slots,"left",{},void 0,!0)],2),F(s.$slots,"default",{},void 0,!0),I("div",{class:x(`${f(e)}__right`)},[F(s.$slots,"right",{},void 0,!0)],2)],6))}});const Q=se(Pe,[["__scopeId","data-v-7277d5d2"]]);function Re(n,e,o,s,m=0,k=S(0)){const b=S(null),{footerHeightRef:g}=be();let i={useLayoutFooter:!0};const C=r=>{i=r};function N(){z(()=>{R()})}function $(r,w="all"){var y,a,p,_;function H(t){return Number(t.replace(/[^\d]/g,""))}let l=0;const d="0px";if(r){const t=getComputedStyle(r),u=H((y=t==null?void 0:t.marginTop)!=null?y:d),c=H((a=t==null?void 0:t.marginBottom)!=null?a:d),B=H((p=t==null?void 0:t.paddingTop)!=null?p:d),M=H((_=t==null?void 0:t.paddingBottom)!=null?_:d);w==="all"?(l+=u,l+=c,l+=B,l+=M):w==="top"?(l+=u,l+=B):(l+=c,l+=M)}return l}function P(r){return r==null?null:r instanceof HTMLDivElement?r:r.$el}function R(){return j(this,null,function*(){var _;if(!n.value)return;yield z();const r=P(f(e));if(!r)return;const{bottomIncludeBody:w}=re(r);let H=0;o.forEach(t=>{var u,c;H+=(c=(u=P(f(t)))==null?void 0:u.offsetHeight)!=null?c:0});let l=(_=$(r))!=null?_:0;s.forEach(t=>{l+=$(P(f(t)))});let d=0;function y(t,u){if(t&&u){const c=t.parentElement;c&&(ie(u)?c.classList.contains(u)?d+=$(c,"bottom"):(d+=$(c,"bottom"),y(c,u)):ce(u)&&u>0&&(d+=$(c,"bottom"),y(c,--u)))}}ue(m)?y(r,f(m)):y(r,m);let a=w-f(g)-f(k)-H-l-d;const p=()=>{var t;(t=i.elements)==null||t.forEach(u=>{var c,B;a+=(B=(c=P(f(u)))==null?void 0:c.offsetHeight)!=null?B:0})};i.useLayoutFooter&&f(g)>0,p(),b.value=a})}return Ce(()=>{z(()=>{R()})}),$e(()=>{R()},{wait:50,immediate:!0}),O(()=>[g.value],()=>{R()},{flush:"post",immediate:!0}),{redoHeight:N,setCompensation:C,contentHeight:b}}const we=Z({name:"PageWrapper",inheritAttrs:!1,__name:"PageWrapper",props:{title:h.string,dense:h.bool,ghost:h.bool,content:h.string,contentStyle:{type:Object},contentBackground:h.bool,contentFullHeight:h.bool.def(!1),contentClass:h.string,fixedHeight:h.bool,upwardSpace:h.oneOfType([h.number,h.string]).def(0)},setup(n){const e=n,o=fe(),s=ge(),m=S(null),k=S(null),b=S(null),g=S(null),{prefixCls:i}=U("page-wrapper");de(le,v(()=>e.fixedHeight));const C=v(()=>e.contentFullHeight),N=v(()=>e.upwardSpace),{redoHeight:$,setCompensation:P,contentHeight:R}=Re(C,m,[k,g],[b],N);P({useLayoutFooter:!0,elements:[g]});const r=v(()=>{var a;return[i,{[`${i}--dense`]:e.dense},(a=o.class)!=null?a:{}]}),w=v(()=>e.content||(s==null?void 0:s.headerContent)||e.title||l.value.length),H=v(()=>(s==null?void 0:s.leftFooter)||(s==null?void 0:s.rightFooter)),l=v(()=>Object.keys(L(s,"default","leftFooter","rightFooter","headerContent"))),d=v(()=>{const{contentFullHeight:a,contentStyle:p,fixedHeight:_}=e;if(!a)return T({},p);const t=`${f(R)}px`;return T(D(T({},p),{minHeight:t}),_?{height:t}:{})}),y=v(()=>{const{contentBackground:a,contentClass:p}=e;return[`${i}-content`,p,{[`${i}-content-bg`]:a}]});return O(()=>[H.value],()=>{$()},{flush:"post",immediate:!0}),(a,p)=>(E(),A("div",{class:x(r.value),ref_key:"wrapperRef",ref:m},[w.value?(E(),K(f(ke),me({key:0,ghost:n.ghost,title:n.title},f(L)(a.$attrs,"class"),{ref_key:"headerRef",ref:k}),pe({default:W(()=>[n.content?(E(),A(ye,{key:0},[ve(Fe(n.content),1)],64)):F(a.$slots,"headerContent",{key:1})]),_:2},[he(l.value,_=>({name:_,fn:W(t=>[F(a.$slots,_,He(_e(t||{})))])}))]),1040,["ghost","title"])):G("",!0),I("div",{class:x(["overflow-hidden",y.value]),style:J(d.value),ref_key:"contentRef",ref:b},[F(a.$slots,"default")],6),H.value?(E(),K(Q,{key:1,ref_key:"footerRef",ref:g},{left:W(()=>[F(a.$slots,"leftFooter")]),right:W(()=>[F(a.$slots,"rightFooter")]),_:3},512)):G("",!0)],2))}});X(Q);const ze=X(we);export{ze as P};
